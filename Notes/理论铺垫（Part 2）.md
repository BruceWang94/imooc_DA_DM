## 理论铺垫（Part 2）
- 假设检验
- 相关系数：皮尔逊、斯皮尔曼
- 回归：线性回归
- PCA与SVD

### 假设检验
根据一定的假设条件，从样本推算总体或者推断样本与样本之间关系的一种方法。或者，做出一个假设，根据数据或者已知的分布性质来推断这个假设成立的概率有多大。
具体过程：
- 建立原假设$H_0$（包括等号），$H_0$的反命题为$H_1$，也叫备择假设；
- 选择检验统计量；
- 根据显著水平（一般为0.05），确定拒绝域；
- 计算p值或样本统计量，作出判断。

假设检验的方法有很多，它们差别取决于检验统计量的选取上，例如卡方检验、t-分布检验、F检验等。它们的流程是一样的，只是统计量不同，场景也会不同。例如：t-分布检验，常用于比较两组样本分布是否一致；F检验，常用于方差分析。

__假设检验（例）__：</br>
洗衣粉标准重量500g，标准差2g。
501.8、502.4、499、500.3、504.5、498.2、505.6
1. $H_0$：样本是符合均值500g，标准差2g的正态分布。
2. 假设检验量：$\frac{x-x_0}{\sqrt{\sigma^2/n}} = \frac{x-500}{\sqrt{2^2/7}}$
3. 显著性水平：0.05
4. 2.23，拒绝（p值0.026<0.05）

__卡方检验（例）__：</br>
判断化妆行为与性别有没有关系，经调查得到下表：
|       | 男    | 女    |       |
|:---   | :---: | :---: | :---: |
|化妆   |15(55) |95(55) |110    |
|不化妆 |85(45) |5(45)  |90     |
|       |100    |100    |200    |
确定原假设$H_0$：化妆与性别无关。即，在所有的人群中，化妆与不化妆的人群中的男女分布是一致的。假设检验量就是卡方分布的假设检验量，如下公式：

$$\chi^2 = \sum_{i=1}^{k}{\frac{(f_i-np_i)^2}{np_i}}$$

其中，$f_i$是实际值，$np_i$理论分布，例如男士化妆的实际值是15，而理论值是55。从而得到，

$$
\begin{aligned}
\chi^2 = & \sum_{i=1}^{k}{\frac{(f_i-np_i)^2}{np_i}} \\
       = & \frac{(95-55)^2}{55} + \frac{(15-55)^2}{55} + \frac{(85-45)^2}{45} + \frac{(5-45)^2}{45} \\
       = & 129.3
\end{aligned}
$$

|P|0.99|0.95|0.90|0.70|
|---|---|---|---|---|
|卡方|0.00016|0.004|0.016|0.148|

|P|0.50|0.30|0.10|0.05|0.01|
|---|---|---|---|---|---|
|卡方|0.455|1.074|2.706|3.841|6.635|

所以，可以拒绝原假设。即，化妆与性别有关。

#### 方差检验
m组，共n个采样：3组，共15个采样

<table>
    <tr>
        <td rowspan='2'>编号</td>
        <td colspan='3'>电池寿命</td>
    </tr>
    <tr>
        <td>甲</td>
        <td>乙</td>
        <td>丙</td>
    </tr>
    <tr>
        <td>1</td>
        <td>49</td>
        <td>28</td>
        <td>38</td>
    </tr>
    <tr>
        <td>2</td>
        <td>50</td>
        <td>32</td>
        <td>40</td>
    </tr>
    <tr>
        <td>3</td>
        <td>39</td>
        <td>30</td>
        <td>45</td>
    </tr>
    <tr>
        <td>4</td>
        <td>40</td>
        <td>26</td>
        <td>42</td>
    </tr>
    <tr>
        <td>5</td>
        <td>43</td>
        <td>34</td>
        <td>48</td>
    </tr>
</table>

方差检验（单因素）
- 计算

    $$SST = \sum_{i=1}^{m} \sum_{j=1}^{n_i}{(x_{ij}-\bar{x})^2}$$
    $$SSM = \sum_{i=1}^{m} \sum_{j=1}^{n_i}{(\bar{x}_i-\bar{x})^2}$$
    $$SSE = \sum_{i=1}^{m} \sum_{j=1}^{n_i}{(x_{ij}-\bar{x}_i)^2}$$

    - SS - 平方和
    - SST - 总变差平方和；
    - SSM - 平均平方和；每个组与整体均值的平方和，又称组间平方和；
    - SSE - 残差平方和；每个组内部的平方和，又称组内平方和。

- 检测统计量F，做假设检验【F满足自由度$(m-1,n-m)$的F分布】

    $$F=\frac{SSM / (m-1)}{SSE / (n-m)}$$

确定原假设，假设均值是一样的。假设统计量为F值，显著性水平为0.05。

计算可得，$\bar{x}_1=44.2$，$\bar{x}_2=30$，$\bar{x}_3=42.6$，$\bar{x}=38.93$。

从而，可得$SSM=604.93$，$SSE=206$。

$$F=\frac{SSM / (3-1)}{SSE / (15-3)}=17.62$$

可得$P_{value} = 0.00027<0.05$，拒绝原假设。

### 相关系数：皮尔逊、斯皮尔曼
### 回归：线性回归
### PCA与SVD   